<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Surveillance PC</title>
    <link href="style.css" rel="stylesheet" />
    <script type="text/javascript" src="script.js"></script>

</head>

<body>
        <div class="navbar">
        <a href="/"> <img src="SpyGhost_icon.png" alt="Logo de l'application" height="50.6" width="50.6"> </a>
        <input type="text" placeholder="Rechercher un appareil...">
        <div class="client-count">Connectés: <span id="connected-count">0</span> </br> Non Connectés: <span id="disconnected-count">0</span></div>
        <a href="./init_db.html"> <button id="api-button" >Reset DB</button> </a>
        <a href="./setting.html"><button id="settings-button">Settings</button></a>
        </div>

    <div class="client-list" id="client-list">
        </div>

    <div class="device-page" id="device-page" style="display: none;">
        <h2>Surveillance de l'appareil <span id="device-name-header"></span></h2>
        <!-- Les indicateurs de fonctionnalités seront insérés ici par JavaScript -->
        
        <div class="resources-area">
            <h3>Ressources système</h3>
            <div class="resource-metrics">
                <div class="resource-metric">
                    <h4>CPU Usage</h4>
                    <div class="circle-container">
                        <div class="circle" id="cpu-progress">
                            <div class="percentage" id="cpu-usage-text">0%</div>
                        </div>
                    </div>

                    <div id="cpu-alert"></div>
                </div>

                <div class="resource-metric">
                    <h4>RAM Usage</h4>
                    <div class="circle-container">
                        <div class="circle" id="ram-progress">
                            <div class="percentage" id="ram-usage-text">0%</div>
                        </div>
                    </div>
                    <div id="ram-alert"></div>
                </div>

            </div>
        </div>

        <div class="screenshot-area">
            <h3>Screenshot en direct</h3>
            <img id="screenshot-display" src="" alt="Screenshot de l'appareil">
        </div>
        <div class="command-area">
            <h3>Exécuter une commande</h3>
            <input type="text" id="command-input" placeholder="Commande à exécuter">
            <button id="execute-command-button">Exécuter</button>
            <div id="command-output" class="command-output"></div>
            <div class="command-buttons">
                <button id="PowerOff-command-button">Power Off</button>
                <button id="Cancel-Shutdown-button">Cancel Shutdown</button>
                <button id="Freeze-command-button">Freeze</button>
                <button id="Unfreeze-command-button">Unfreeze</button>
            </div>
        </div>
        
        <!-- Nouvelle section pour l'historique des commandes -->
        <div class="history-area">
            <h3>Historique des commandes</h3>
            <div class="history-filters">
                <button class="history-filter-btn active" data-filter="all">Toutes</button>
                <button class="history-filter-btn" data-filter="PowerOff">Power Off</button>
                <button class="history-filter-btn" data-filter="CancelShutdown">Cancel Shutdown</button>
                <button class="history-filter-btn" data-filter="Freeze">Freeze</button>
                <button class="history-filter-btn" data-filter="Unfreeze">Unfreeze</button>
                <button class="history-filter-btn" data-filter="Manual">Manuelles</button>
            </div>
            <div class="history-table-container">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date/Heure</th>
                            <th>Commande</th>
                            <th>Type</th>
                            <th>Statut</th>
                        </tr>
                    </thead>
                    <tbody id="command-history-tbody">
                        <!-- L'historique sera chargé ici -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="logs-area">
            <h3>Journaux d'activité</h3>
            <div class="logs-filter">
                <label><input type="checkbox" id="filter-file" checked> Fichiers</label>
                <label><input type="checkbox" id="filter-folder" checked> Dossiers</label>
                <label><input type="checkbox" id="filter-exe" checked> Exécutables</label>
                <label><input type="checkbox" id="filter-created" checked> Création</label>
                <label><input type="checkbox" id="filter-modified" checked> Modification</label>
                <label><input type="checkbox" id="filter-deleted" checked> Suppression</label>
                <label><input type="checkbox" id="filter-moved" checked> Déplacement</label>
            </div>
            <div class="logs-container" id="logs-container"></div>
        </div>
        <div class="malware-scan-area">
            <h3>Détection de fichiers suspects</h3>
            <div id="scan-results-container">
                <p>Aucun fichier suspect détecté récemment</p>
            </div>
        </div>
        <div class="command-area">
            <h3>Ajout d'une clé API</h3>
            <input type="text" id="api-input" placeholder="Insérer ici">
            <button id="execute-api-button">Ajouter</button>
            <div id="api-output" class="api-output"></div>
        </div>
        <button id="back-to-list-button">Retour à la liste des appareils</button>
    </div>

    <script src="script.js"></script>
    <link rel="stylesheet" href="style.css">
</body>
</html>